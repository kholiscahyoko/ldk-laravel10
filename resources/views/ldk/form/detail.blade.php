<div class="modal fade" id="detailModal" tabindex="-1" role="dialog" aria-labelledby="detailModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="detailModalLabel">LDK Detail</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row justify-content-around">
                    <div class="col-12 mb-2">
                        <h5>Characteristic</h5>
                        <div class="card-content">
                            <div class="media d-flex flex-wrap justify-content-around" id="detail_characteristic"></div>
                        </div>
                    </div>
                    <div class="col-4 mb-2">
                        <h5 >Material Number</h5>
                        <div class="card-content">
                            <p class="text-justify" id="detail_material_number"></p>
                        </div>
                    </div>
                    <div class="col-4 mb-2">
                        <h5>LDK Number</h5>
                        <div class="card-content">
                            <p class="text-justify" id="detail_ldk_number"></p>
                        </div>
                    </div>
                    <div class="col-4 mb-2">
                        <h5>Revision Number</h5>
                        <div class="card-content">
                            <p class="text-justify" id="detail_revision_number"></p>
                        </div>
                    </div>
                    <div class="col-4 mb-2">
                        <h5>Composition</h5>
                        <div class="card-content">
                            <p class="text-justify" id="detail_composition"></p>
                        </div>
                    </div>
                    <div class="col-4 mb-2">
                        <h5>Reactivity</h5>
                        <div class="card-content">
                            <p class="text-justify" id="detail_reactivity"></p>
                        </div>
                    </div>
                    <div class="col-4 mb-2">
                        <h5>Hazard Identification</h5>
                        <div class="card-content">
                            <p class="text-justify" id="detail_hazard_identification"></p>
                        </div>
                    </div>
                    <div class="col-4 mb-2">
                        <h5>Physical State</h5>
                        <div class="card-content">
                            <p class="text-justify" id="detail_physical_state"></p>
                        </div>
                    </div>
                    <div class="col-4 mb-2">
                        <h5>Colour</h5>
                        <div class="card-content">
                            <p class="text-justify" id="detail_colour"></p>
                        </div>
                    </div>
                    <div class="col-4 mb-2">
                        <h5>Odour</h5>
                        <div class="card-content">
                            <p class="text-justify" id="detail_odour"></p>
                        </div>
                    </div>
                    <div class="col-4 mb-2">
                        <h5>pH</h5>
                        <div class="card-content">
                            <p class="text-justify" id="detail_ph"></p>
                        </div>
                    </div>
                    <div class="col-4 mb-2">
                        <h5>Melting Point</h5>
                        <div class="card-content">
                            <p class="text-justify" id="detail_melting_point"></p>
                        </div>
                    </div>
                    <div class="col-4 mb-2">
                        <h5>LFL</h5>
                        <div class="card-content">
                            <p class="text-justify" id="detail_lfl"></p>
                        </div>
                    </div>
                    <div class="col-4 mb-2">
                        <h5>UFL</h5>
                        <div class="card-content">
                            <p class="text-justify" id="detail_ufl"></p>
                        </div>
                    </div>
                    <div class="col-4 mb-2">
                        <h5>P3K Eye</h5>
                        <div class="card-content">
                            <p class="text-justify" id="detail_p3k_eye"></p>
                        </div>
                    </div>
                    <div class="col-4 mb-2">
                        <h5>P3K Skin</h5>
                        <div class="card-content">
                            <p class="text-justify" id="detail_p3k_skin"></p>
                        </div>
                    </div>
                    <div class="col-4 mb-2">
                        <h5>P3K Ingestion</h5>
                        <div class="card-content">
                            <p class="text-justify" id="detail_p3k_ingestion"></p>
                        </div>
                    </div>
                    <div class="col-4 mb-2">
                        <h5>P3K Inhalation</h5>
                        <div class="card-content">
                            <p class="text-justify" id="detail_p3k_inhalation"></p>
                        </div>
                    </div>
                    <div class="col-4 mb-2">
                        <h5>P3K Others</h5>
                        <div class="card-content">
                            <p class="text-justify" id="detail_p3k_others"></p>
                        </div>
                    </div>
                    <div class="col-4 mb-2">
                        <h5>Handling Storage</h5>
                        <div class="card-content">
                            <p class="text-justify" id="detail_handling_storage"></p>
                        </div>
                    </div>
                    <div class="col-4 mb-2">
                        <h5>Spill Leakage</h5>
                        <div class="card-content">
                            <p class="text-justify" id="detail_spill_leakage"></p>
                        </div>
                    </div>
                    <div class="col-4 mb-2">
                        <h5>Disposal</h5>
                        <div class="card-content">
                            <p class="text-justify" id="detail_disposal"></p>
                        </div>
                    </div>
                    <div class="col-4 mb-2">
                        <h5>Ecology Info</h5>
                        <div class="card-content">
                            <p class="text-justify" id="detail_ecology_info"></p>
                        </div>
                    </div>
                    <div class="col-4 mb-2">
                        <h5>Toxicology Info</h5>
                        <div class="card-content">
                            <p class="text-justify" id="detail_toxicology_info"></p>
                        </div>
                    </div>
                    <div class="col-4 mb-2">
                        <h5>Regulation</h5>
                        <div class="card-content">
                            <p class="text-justify" id="detail_regulation"></p>
                        </div>
                    </div>
                    <div class="col-4 mb-2">
                        <h5>Shipping</h5>
                        <div class="card-content">
                            <p class="text-justify" id="detail_shipping"></p>
                        </div>
                    </div>
                    <div class="col-4 mb-2">
                        <h5>Others Info</h5>
                        <div class="card-content">
                            <p class="text-justify" id="detail_others_info"></p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="reset" class="btn btn-secondary" data-dismiss="modal">Close</button>
                @canany(['manage-ldk'])
                <button id="btnEditDetail" type="button" class="btn btn-primary" data-dismiss="modal" data-toggle="modal" data-target="#editModal" onclick="">Edit</button>
                @endcanany
            </div>
        </div>
    </div>
</div>
<script>
    function showModalDetail(id){
        var xhr = new XMLHttpRequest();

        xhr.open('GET', '/ldk/' + id, true);
        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4 && xhr.status === 200) {
                // Parse the JSON response
                var responseData = JSON.parse(xhr.responseText);

                // Access the user data
                var data = responseData.data;
                console.log(data);

                detail_characteristic = document.getElementById('detail_characteristic');
                detail_characteristic.innerHTML = "";
                for (let i = 0; i < data.characteristic.length; i++) {
                    let img = new Image();
                    img.setAttribute('class', "img-thumbnail col");
                    img.style = "max-width:100px;";
                    img.src = `/storage/${data.characteristic[i].pictogram}`;
                    detail_characteristic.appendChild(img);
                }
                document.getElementById('detail_material_number').innerHTML = data.master_bk.material_number;

                document.getElementById('detail_ldk_number').innerHTML = data.ldk_number ?? "Not Set";
                document.getElementById('detail_revision_number').innerHTML = data.revision_number ?? "Not Set";
                document.getElementById('detail_composition').innerHTML = data.composition ?? "Not Set";
                document.getElementById('detail_reactivity').innerHTML = data.reactivity ?? "Not Set";
                document.getElementById('detail_hazard_identification').innerHTML = data.hazard_identification ?? "Not Set";
                document.getElementById('detail_physical_state').innerHTML = data.physical_state ?? "Not Set";
                document.getElementById('detail_colour').innerHTML = data.colour ?? "Not Set";
                document.getElementById('detail_odour').innerHTML = data.odour ?? "Not Set";
                document.getElementById('detail_ph').innerHTML = data.ph ?? "Not Set";
                document.getElementById('detail_melting_point').innerHTML = data.melting_point ?? "Not Set";
                document.getElementById('detail_lfl').innerHTML = data.lfl ?? "Not Set";
                document.getElementById('detail_ufl').innerHTML = data.ufl ?? "Not Set";
                document.getElementById('detail_p3k_eye').innerHTML = data.p3k_eye ?? "Not Set";
                document.getElementById('detail_p3k_skin').innerHTML = data.p3k_skin ?? "Not Set";
                document.getElementById('detail_p3k_ingestion').innerHTML = data.p3k_ingestion ?? "Not Set";
                document.getElementById('detail_p3k_inhalation').innerHTML = data.p3k_inhalation ?? "Not Set";
                document.getElementById('detail_p3k_others').innerHTML = data.p3k_others ?? "Not Set";
                document.getElementById('detail_handling_storage').innerHTML = data.handling_storage ?? "Not Set";
                document.getElementById('detail_spill_leakage').innerHTML = data.spill_leakage ?? "Not Set";
                document.getElementById('detail_disposal').innerHTML = data.disposal ?? "Not Set";
                document.getElementById('detail_ecology_info').innerHTML = data.ecology_info ?? "Not Set";
                document.getElementById('detail_toxicology_info').innerHTML = data.toxicology_info ?? "Not Set";
                document.getElementById('detail_regulation').innerHTML = data.regulation ?? "Not Set";
                document.getElementById('detail_shipping').innerHTML = data.shipping ?? "Not Set";
                document.getElementById('detail_others_info').innerHTML = data.others_info ?? "Not Set";
                @canany(['manage-ldk'])
                document.getElementById('btnEditDetail').setAttribute('onclick', `showModalEdit(${id});`);
                @endcanany
            } else if (xhr.readyState === 4) {
                // Handle errors or other status codes
                console.error(xhr.status, xhr.statusText);
            }
        };

        xhr.send();
    }
</script>